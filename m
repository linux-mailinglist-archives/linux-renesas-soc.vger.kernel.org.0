Return-Path: <linux-renesas-soc-owner@vger.kernel.org>
X-Original-To: lists+linux-renesas-soc@lfdr.de
Delivered-To: lists+linux-renesas-soc@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 40B82429BC1
	for <lists+linux-renesas-soc@lfdr.de>; Tue, 12 Oct 2021 05:11:04 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S231951AbhJLDND (ORCPT <rfc822;lists+linux-renesas-soc@lfdr.de>);
        Mon, 11 Oct 2021 23:13:03 -0400
Received: from relmlor1.renesas.com ([210.160.252.171]:34240 "EHLO
        relmlie5.idc.renesas.com" rhost-flags-OK-OK-OK-FAIL)
        by vger.kernel.org with ESMTP id S231742AbhJLDND (ORCPT
        <rfc822;linux-renesas-soc@vger.kernel.org>);
        Mon, 11 Oct 2021 23:13:03 -0400
Date:   12 Oct 2021 12:11:01 +0900
X-IronPort-AV: E=Sophos;i="5.85,366,1624287600"; 
   d="scan'208";a="96701276"
Received: from unknown (HELO relmlir5.idc.renesas.com) ([10.200.68.151])
  by relmlie5.idc.renesas.com with ESMTP; 12 Oct 2021 12:11:01 +0900
Received: from mercury.renesas.com (unknown [10.166.252.133])
        by relmlir5.idc.renesas.com (Postfix) with ESMTP id 1D9724009BFF;
        Tue, 12 Oct 2021 12:11:01 +0900 (JST)
Message-ID: <87czoblyyi.wl-kuninori.morimoto.gx@renesas.com>
From:   Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
To:     Niklas =?ISO-8859-1?Q?S=F6derlund?= 
        <niklas.soderlund+renesas@ragnatech.se>
Cc:     Daniel Lezcano <daniel.lezcano@linaro.org>,
        Geert Uytterhoeven <geert@linux-m68k.org>,
        linux-pm@vger.kernel.org, linux-renesas-soc@vger.kernel.org
Subject: Re: [PATCH 0/2] thermal: rcar_gen3_thermal: Read calibration from fuses
In-Reply-To: <20211011225802.11497-1-niklas.soderlund+renesas@ragnatech.se>
References: <20211011225802.11497-1-niklas.soderlund+renesas@ragnatech.se>
User-Agent: Wanderlust/2.15.9 Emacs/26.3 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-renesas-soc.vger.kernel.org>
X-Mailing-List: linux-renesas-soc@vger.kernel.org


Hi Niklas

Thank you for the patches.

> 1. Check that the driver uses the fused values, this is showed by the
>    log message, dev_info(dev, "Using fused calibration values\n"); is
>    trigged when the driver probe.
>
> 2. Check the temperature readings in sysfs are reasonable, the values are
>    in millidegree Celsius. On my system that uses the coefficients from
>    the driver I have 41-42 degrees Celsius at the moment.
>
>    # grep . /sys/class/thermal/thermal_zone*/temp
>    /sys/class/thermal/thermal_zone0/temp:41000
>    /sys/class/thermal/thermal_zone1/temp:42000
>    /sys/class/thermal/thermal_zone2/temp:41000

I checkout:ed v5.15-rc4, and apply your patches.
This is the result

--- log ----
	...
	[    1.516781] i2c-rcar e6510000.i2c: probed
	[    1.532108] i2c-rcar e66d8000.i2c: probed
=>	[    1.539314] rcar_gen3_thermal e6198000.thermal: Using fused calibration values
	[    1.551116] rcar_gen3_thermal e6198000.thermal: TSC0: Loaded 1 trip points
	[    1.562274] rcar_gen3_thermal e6198000.thermal: TSC1: Loaded 1 trip points
	[    1.573413] rcar_gen3_thermal e6198000.thermal: TSC2: Loaded 2 trip points
	[    1.595676] random: fast init done
	[    1.612993] NET: Registered PF_PACKET protocol family
	...
	# login
=>	# grep . /sys/class/thermal/thermal_zone*/temp 
	/sys/class/thermal/thermal_zone0/temp:37000
	/sys/class/thermal/thermal_zone1/temp:38500
	/sys/class/thermal/thermal_zone2/temp:38500

I'm happy if these are the expected.

Tested-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>

Thank you for your help !!

Best regards
---
Kuninori Morimoto
